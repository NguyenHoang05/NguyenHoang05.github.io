<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interface</title>
    <link rel="stylesheet" href="link.css" />
    <style>
      :root {
        --chatbot-width: 380px;
        --chatbot-height: 560px;
        --chatbot-gap: 8px; /* kho·∫£ng h·ªü gi·ªØa khung & icon */
        --chatbot-edge: 12px; /* kho·∫£ng c√°ch icon t·ªõi m√©p m√†n h√¨nh */
      }
      /* N√∫t Lottie (icon) */
      #chatbot-toggler {
        position: fixed;
        right: var(--chatbot-edge);
        bottom: var(--chatbot-edge);
        background: transparent;
        border: 0;
        cursor: pointer;
        z-index: 2147483647 !important; /* cao h∆°n iframe */
      }
      #chatbot-toggler canvas {
        width: 90px;
        height: 90px;
        display: block;
      }

      /* Khung iframe ‚Äì v·ªã tr√≠ s·∫Ω do JS ƒë·∫∑t theo icon */
      #chatbotIframe {
        position: fixed;
        /* KH√îNG set right/bottom ·ªü ƒë√¢y ƒë·ªÉ tr√°nh xung ƒë·ªôt v·ªõi JS */
        width: var(--chatbot-width);
        height: var(--chatbot-height);
        border: 0;
        border-radius: 16px;
        display: none; /* m·∫∑c ƒë·ªãnh ·∫©n */
        background: transparent !important; /* n·ªÅn/b√≥ng ƒë·∫∑t b√™n trong popup */
        box-shadow: none !important;
        overflow: hidden;
        z-index: 2147483646 !important; /* th·∫•p h∆°n n√∫t 1 b·∫≠c */
      }

      /* Mobile */
      @media (max-width: 520px) {
        :root {
          --chatbot-width: 95vw;
          --chatbot-height: 80vh;
          --chatbot-gap: 10px;
          --chatbot-edge: 10px;
        }
        #chatbot-toggler {
          right: var(--chatbot-edge);
          bottom: var(--chatbot-edge);
        }
      }

      /* Ch·∫∑n rule chung ƒë√® l√™n button/canvas (n·∫øu c√≥) */
      #chatbot-toggler,
      #chatbot-toggler * {
        background-image: none !important;
        box-shadow: none !important;
      }
    </style>
  </head>

  <body>
    <!-- Header v·ªõi logo tr∆∞·ªùng -->
    <div class="header">
      <div class="header-content">
        <div class="logo">
          <img src="PTIT.png" alt="Logo PTIT" class="logo-image" />
        </div>
        <div class="school-info">
          <h1 class="school-name-vi">
            H·ªåC VI·ªÜN C√îNG NGH·ªÜ B∆ØU CH√çNH VI·ªÑN TH√îNG
          </h1>
          <h2 class="school-name-en">
            POSTS AND TELECOMMUNICATIONS INSTITUTE OF TECHNOLOGY
          </h2>
        </div>
      </div>
    </div>

    <!-- Thanh ƒëi·ªÅu h∆∞·ªõng (Navigation Sidebar) -->
    <div class="navigation">
      <ul>
        <!-- C√°c m·ª•c trong thanh ƒëi·ªÅu h∆∞·ªõng -->
        <li class="list">
          <a href="#">
            <span class="icon"><ion-icon name="home-outline"></ion-icon></span>
            <span class="title">Home</span>
          </a>
        </li>
        <li class="list">
          <a href="#">
            <span class="icon"
              ><ion-icon name="person-outline"></ion-icon
            ></span>
            <span class="title">Proflie</span>
          </a>
        </li>
        <li class="list">
          <a href="#">
            <span class="icon"
              ><ion-icon name="help-circle-outline"></ion-icon
            ></span>
            <span class="title">Help</span>
          </a>
        </li>
        <li class="list">
          <a href="#">
            <span class="icon"
              ><ion-icon name="heart-circle-outline"></ion-icon
            ></span>
            <span class="title">Favorite</span>
          </a>
        </li>

        <li class="list">
          <a href="#">
            <span class="icon"
              ><ion-icon name="lock-closed-outline"></ion-icon
            ></span>
            <span class="title">Password</span>
          </a>
        </li>
        <li class="list">
          <a href="#">
            <span class="icon"
              ><ion-icon name="log-out-outline"></ion-icon
            ></span>
            <span class="title">Sign out</span>
          </a>
        </li>
      </ul>
    </div>

    <div id="mainContent">
      <!-- Khu v·ª±c n·ªôi dung ch√≠nh -->
      <!-- Ph·∫ßn giao di·ªán Home: Dashboard t·ªïng quan -->
      <div
        id="homeSection"
        style="
          display: none;
          background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
          min-height: 100vh;
          padding: 60px 40px;
        "
      >
        <!-- Ti√™u ƒë·ªÅ ch√†o m·ª´ng -->
        <div
          style="
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 80px;
          "
        >
          <div style="text-align: center">
            <div
              style="
                width: 120px;
                height: 120px;
                background: linear-gradient(135deg, #4d5bf9, #6a82fb);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 0 auto 30px;
                box-shadow: 0 20px 60px rgba(77, 91, 249, 0.3);
              "
            >
              <span style="font-size: 3rem; color: white">üìö</span>
            </div>
            <h2 style="color: #1e293b; text-align: center; font-size: 3.5rem">
              CH√ÄO M·ª™NG ƒê·∫æN V·ªöI
            </h2>
            <h1
              style="
                color: #4d5bf9;
                text-align: center;
                font-size: 4rem;
                font-weight: 900;
                letter-spacing: -2px;
                margin: 10px 0 0 0;
                line-height: 1.1;
                text-shadow: 0 4px 20px rgba(77, 91, 249, 0.3);
                font-family: 'Inter', sans-serif;
              "
            >
              TH∆Ø VI·ªÜN PTIT
            </h1>
            <p
              style="
                color: #64748b;
                font-size: 1.2rem;
                margin: 20px 0 0 0;
                font-weight: 500;
              "
            >
              Kh√°m ph√° kho t√†ng tri th·ª©c v√¥ t·∫≠n
            </p>
          </div>
        </div>

        <!-- Thanh t√¨m ki·∫øm -->
        <div
          style="display: flex; justify-content: center; margin: 60px 0 80px 0"
        >
          <div style="position: relative; width: 90%; max-width: 800px">
            <div
              id="searchContainer"
              style="
                position: relative;
                background: white;
                border-radius: 30px;
                box-shadow: 0 25px 80px rgba(0, 0, 0, 0.08);
                border: 2px solid #e2e8f0;
                overflow: visible;
                z-index: 10;
              "
            >
              <input
                id="bookSearchInput"
                type="text"
                placeholder="üîç T√¨m ki·∫øm s√°ch, t√°c gi·∫£ ho·∫∑c ch·ªß ƒë·ªÅ..."
                autocomplete="off"
                style="
                  width: 100%;
                  padding: 30px 40px;
                  border: none;
                  font-size: 1.3rem;
                  outline: none;
                  background: transparent;
                  transition: all 0.3s ease;
                  font-family: 'Inter', sans-serif;
                  font-weight: 500;
                "
                onfocus="handleSearchFocus()"
                onblur="handleSearchBlur()"
                oninput="handleSearchInput(event)"
                onkeydown="handleSearchKeydown(event)"
              />
              <div
                style="
                  position: absolute;
                  right: 40px;
                  top: 50%;
                  transform: translateY(-50%);
                  width: 50px;
                  height: 50px;
                  background: linear-gradient(135deg, #4d5bf9, #6a82fb);
                  border-radius: 50%;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  cursor: pointer;
                  transition: all 0.3s ease;
                "
                onmouseover="this.style.transform='translateY(-50%) scale(1.1)'"
                onmouseout="this.style.transform='translateY(-50%) scale(1)'"
                onclick="performSearch()"
              >
                <span style="color: white; font-size: 1.2rem">üîç</span>
              </div>
            </div>
            
            <!-- Dropdown Suggestions -->
            <div
              id="searchSuggestions"
              style="
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: white;
                border-radius: 0 0 30px 30px;
                box-shadow: 0 25px 80px rgba(0, 0, 0, 0.15);
                border: 2px solid #4d5bf9;
                border-top: none;
                max-height: 400px;
                overflow-y: auto;
                z-index: 1000;
                display: none;
                margin-top: -2px;
              "
            >
              <!-- Suggestions will be populated by JavaScript -->
            </div>
          </div>
        </div>

        <!-- Ti√™u ƒë·ªÅ tin t·ª©c -->
        <div style="text-align: center; margin-bottom: 60px">
          <div
            style="
              display: inline-block;
              background: linear-gradient(135deg, #4d5bf9, #6a82fb);
              padding: 15px 40px;
              border-radius: 50px;
              box-shadow: 0 15px 40px rgba(77, 91, 249, 0.3);
            "
          >
            <h3
              style="
                color: white;
                font-size: 1.8rem;
                font-weight: 700;
                margin: 0;
                letter-spacing: -0.5px;
                font-family: 'Plus+Jakarta+Sans', sans-serif;
              "
            >
              üì∞ TIN T·ª®C M·ªöI NH·∫§T
            </h3>
          </div>
        </div>

        <!-- C√°c tin t·ª©c -->
        <div
          style="
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
          "
        >
          <!-- Tin t·ª©c 1: H·ªçc ph√≠ -->
          <div
            style="
              background: white;
              border-radius: 30px;
              padding: 40px;
              box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
              border: 2px solid #f1f5f9;
              transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
              cursor: pointer;
              position: relative;
              overflow: hidden;
            "
            onmouseover="this.style.transform='translateY(-15px)';this.style.boxShadow='0 30px 80px rgba(77,91,249,0.15)';this.style.border='2px solid #4d5bf9'"
            onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 20px 60px rgba(0,0,0,0.08)';this.style.border='2px solid #f1f5f9'"
          >
            <div
              style="
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, #4d5bf9, #6a82fb);
              "
            ></div>
            <div style="text-align: center">
              <div
                style="
                  width: 80px;
                  height: 80px;
                  background: linear-gradient(135deg, #fef3c7, #fde68a);
                  border-radius: 20px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin: 0 auto 25px;
                  box-shadow: 0 10px 30px rgba(251, 191, 36, 0.3);
                "
              >
                <span style="font-size: 2.5rem">üí∞</span>
              </div>
              <h4
                style="
                  font-size: 1.4rem;
                  font-weight: 700;
                  color: #1e293b;
                  margin: 0 0 15px 0;
                  font-family: 'Plus+Jakarta+Sans', sans-serif;
                "
              >
                H·ªçc ph√≠ nƒÉm h·ªçc 2025-2026
              </h4>
              <p
                style="
                  color: #64748b;
                  font-size: 1rem;
                  margin: 0;
                  line-height: 1.6;
                  font-family: 'Inter', sans-serif;
                "
              >
                C·∫≠p nh·∫≠t m·ªõi nh·∫•t v·ªÅ m·ª©c h·ªçc ph√≠ c√°c ng√†nh ƒë√†o t·∫°o
              </p>
              <div
                style="
                  margin-top: 20px;
                  padding: 8px 20px;
                  background: #fef3c7;
                  color: #92400e;
                  border-radius: 20px;
                  font-size: 0.9rem;
                  font-weight: 600;
                  display: inline-block;
                  font-family: 'Inter', sans-serif;
                "
              >
                M·ªõi c·∫≠p nh·∫≠t
              </div>
            </div>
          </div>

          <!-- Tin t·ª©c 2: ƒêi·ªÉm chu·∫©n -->
          <div
            style="
              background: white;
              border-radius: 30px;
              padding: 40px;
              box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
              border: 2px solid #f1f5f9;
              transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
              cursor: pointer;
              position: relative;
              overflow: hidden;
            "
            onmouseover="this.style.transform='translateY(-15px)';this.style.boxShadow='0 30px 80px rgba(77,91,249,0.15)';this.style.border='2px solid #4d5bf9'"
            onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 20px 60px rgba(0,0,0,0.08)';this.style.border='2px solid #f1f5f9'"
          >
            <div
              style="
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, #4d5bf9, #6a82fb);
              "
            ></div>
            <div style="text-align: center">
              <div
                style="
                  width: 80px;
                  height: 80px;
                  background: linear-gradient(135deg, #dbeafe, #93c5fd);
                  border-radius: 20px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin: 0 auto 25px;
                  box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
                "
              >
                <span style="font-size: 2.5rem">üìä</span>
              </div>
              <h4
                style="
                  font-size: 1.4rem;
                  font-weight: 700;
                  color: #1e293b;
                  margin: 0 0 15px 0;
                  font-family: 'Plus+Jakarta+Sans', sans-serif;
                "
              >
                ƒêi·ªÉm chu·∫©n nƒÉm 2025-2026
              </h4>
              <p
                style="
                  color: #64748b;
                  font-size: 1rem;
                  margin: 0;
                  line-height: 1.6;
                  font-family: 'Inter', sans-serif;
                "
              >
                Th√¥ng tin ƒëi·ªÉm chu·∫©n x√©t tuy·ªÉn c√°c ng√†nh
              </p>
              <div
                style="
                  margin-top: 20px;
                  padding: 8px 20px;
                  background: #dbeafe;
                  color: #1e40af;
                  border-radius: 20px;
                  font-size: 0.9rem;
                  font-weight: 600;
                  display: inline-block;
                  font-family: 'Inter', sans-serif;
                "
              >
                S·∫Øp c√¥ng b·ªë
              </div>
            </div>
          </div>

          <!-- Tin t·ª©c 3: Th√¥ng tin tr∆∞·ªùng -->
          <div
            style="
              background: white;
              border-radius: 30px;
              padding: 40px;
              box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
              border: 2px solid #f1f5f9;
              transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
              cursor: pointer;
              position: relative;
              overflow: hidden;
            "
            onmouseover="this.style.transform='translateY(-15px)';this.style.boxShadow='0 30px 80px rgba(77,91,249,0.15)';this.style.border='2px solid #4d5bf9'"
            onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 20px 60px rgba(0,0,0,0.08)';this.style.border='2px solid #f1f5f9'"
          >
            <div
              style="
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, #4d5bf9, #6a82fb);
              "
            ></div>
            <div style="text-align: center">
              <div
                style="
                  width: 80px;
                  height: 80px;
                  background: linear-gradient(135deg, #dcfce7, #86efac);
                  border-radius: 20px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin: 0 auto 25px;
                  box-shadow: 0 10px 30px rgba(34, 197, 94, 0.3);
                "
              >
                <span style="font-size: 2.5rem">üè´</span>
              </div>
              <h4
                style="
                  font-size: 1.4rem;
                  font-weight: 700;
                  color: #1e293b;
                  margin: 0 0 15px 0;
                  font-family: 'Plus+Jakarta+Sans', sans-serif;
                "
              >
                Th√¥ng tin v·ªÅ tr∆∞·ªùng
              </h4>
              <p
                style="
                  color: #64748b;
                  font-size: 1rem;
                  margin: 0;
                  line-height: 1.6;
                  font-family: 'Inter', sans-serif;
                "
              >
                Gi·ªõi thi·ªáu t·ªïng quan v·ªÅ H·ªçc vi·ªán PTIT
              </p>
              <div
                style="
                  margin-top: 20px;
                  padding: 8px 20px;
                  background: #dcfce7;
                  color: #166534;
                  border-radius: 20px;
                  font-size: 0.9rem;
                  font-weight: 600;
                  display: inline-block;
                  font-family: 'Inter', sans-serif;
                "
              >
                Lu√¥n c·∫≠p nh·∫≠t
              </div>
            </div>
          </div>
        </div>

        <!-- Th√¥ng tin b·ªï sung -->
        <div
          style="
            text-align: center;
            margin-top: 80px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
          "
        >
          <div
            style="
              background: white;
              border-radius: 30px;
              padding: 40px;
              box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
              border: 2px solid #f1f5f9;
            "
          >
            <div
              style="
                width: 60px;
                height: 60px;
                background: linear-gradient(135deg, #4d5bf9, #6a82fb);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 0 auto 20px;
                box-shadow: 0 10px 30px rgba(77, 91, 249, 0.3);
              "
            >
              <span style="font-size: 1.5rem; color: white">üí°</span>
            </div>
            <h4
              style="
                font-size: 1.3rem;
                font-weight: 700;
                color: #1e293b;
                margin: 0 0 15px 0;
                font-family: 'Plus+Jakarta+Sans', sans-serif;
              "
            >
              L∆∞u √Ω quan tr·ªçng
            </h4>
            <p
              style="
                color: #64748b;
                font-size: 1.1rem;
                margin: 0;
                line-height: 1.6;
                font-family: 'Inter', sans-serif;
              "
            >
              C√°c th√¥ng tin tr√™n ƒë∆∞·ª£c c·∫≠p nh·∫≠t li√™n t·ª•c. Vui l√≤ng theo d√µi ƒë·ªÉ
              n·∫Øm b·∫Øt nh·ªØng thay ƒë·ªïi m·ªõi nh·∫•t v·ªÅ h·ªçc ph√≠, ƒëi·ªÉm chu·∫©n v√† th√¥ng
              tin tr∆∞·ªùng!
            </p>
          </div>
        </div>
      </div>
      <!-- Ph·∫ßn giao di·ªán Profile: ch·ªâ c√≤n Sinh vi√™n -->
      <div id="profileSection" style="display: none">
        <div
          style="
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
          "
        >
          <div style="display: flex; align-items: center; gap: 24px">
            <div style="position: relative">
              <img
                src="Profile.jpg"
                alt="avatar"
                style="
                  width: 80px;
                  height: 80px;
                  border-radius: 50%;
                  object-fit: cover;
                  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
                  border: 4px solid rgba(255, 255, 255, 0.8);
                "
              />
              <div
                style="
                  position: absolute;
                  bottom: 2px;
                  right: 2px;
                  width: 20px;
                  height: 20px;
                  background: #10b981;
                  border-radius: 50%;
                  border: 3px solid white;
                "
              ></div>
            </div>
            <div style="flex: 1">
              <h3
                id="studentName"
                style="
                  font-size: 1.5rem;
                  font-weight: 600;
                  color: #1a1a1a;
                  margin-bottom: 8px;
                "
              >
                T√™n Sinh Vi√™n
              </h3>
              <p style="color: #666; font-size: 1rem; margin-bottom: 4px">
                <strong>M√£ sinh vi√™n:</strong> <span id="studentId"></span>
              </p>
              <p style="color: #666; font-size: 1rem; margin-bottom: 4px">
                <strong>L·ªõp:</strong> <span id="studentClass"></span>
              </p>
              <p style="color: #666; font-size: 1rem; margin-bottom: 4px">
                <strong>Email:</strong> <span id="studentEmail"></span>
              </p>
              <p style="color: #666; font-size: 1rem">
                <strong>Tr·∫°ng th√°i:</strong>
                <span
                  id="studentStatus"
                  style="color: #10b981; font-weight: 600"
                  >---</span
                >
              </p>
            </div>
          </div>
        </div>
        <!-- B·∫£ng s√°ch ƒë√£ m∆∞·ª£n - n·∫±m TRONG profileSection -->
        <div
          style="
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            max-width: 1100px;
            margin: 40px auto;
          "
        >
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
            <h3 style="font-size:1.6rem;font-weight:700;color:#1a1a1a;margin:0;display:flex;align-items:center;">
              <span style="font-size:1.8rem;margin-right:8px">üìö</span>
              S√°ch ƒë√£ m∆∞·ª£n
            </h3>
            <input oninput="filterStudentBorrowedBooks(this.value)" placeholder="T√¨m s√°ch ƒë√£ m∆∞·ª£n theo t√™n ho·∫∑c ID..." style="padding:8px 12px;border:1px solid #e5e7eb;border-radius:10px;min-width:280px;font-size:0.95rem;" />
          </div>
          <div style="overflow-x:auto">
            <table style="width:100%;border-collapse:separate;border-spacing:0;background:rgba(255,255,255,0.6);border-radius:14px;overflow:hidden;font-size:1rem;">
              <thead>
                <tr style="background:linear-gradient(135deg,#4d5bf9,#6a82fb)">
                  <th style="padding:18px 22px;text-align:center;color:white;font-weight:600;font-size:1rem;width:80px">#</th>
                  <th style="padding:18px 22px;text-align:left;color:white;font-weight:600;font-size:1rem">ID S√°ch</th>
                  <th style="padding:18px 22px;text-align:left;color:white;font-weight:600;font-size:1rem">T√™n s√°ch</th>
                  <th style="padding:18px 22px;text-align:center;color:white;font-weight:600;font-size:1rem">Ng√†y m∆∞·ª£n</th>
                  <th style="padding:18px 22px;text-align:center;color:white;font-weight:600;font-size:1rem">H·∫°n tr·∫£</th>
                  <th style="padding:18px 22px;text-align:center;color:white;font-weight:600;font-size:1rem">Tr·∫°ng th√°i</th>
                </tr>
              </thead>
              <tbody id="borrowedBooksTableBody"></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- import script -->
      <script
        type="module"
        src="../../Web/firebase/student/profile.js"
      ></script>

      <!-- import script -->
      <script
        type="module"
        src="../../Web/firebase/student/borrowsd.js"
      ></script>

      <!-- (ƒë√£ x√≥a b·∫£ng m∆∞·ª£n s√°ch ngo√†i Profile ƒë·ªÉ tr√°nh hi·ªán ·ªü c√°c ph·∫ßn kh√°c) -->

      <!-- Ph·∫ßn giao di·ªán Help (Tr·ª£ gi√∫p) -->
      <div id="helpSection" style="display: none">
        <!-- Header Help -->
        <div style="text-align: center; margin-bottom: 60px">
          <div
            style="
              width: 100px;
              height: 100px;
              background: linear-gradient(135deg, #4d5bf9, #6a82fb);
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              margin: 0 auto 30px;
              box-shadow: 0 20px 60px rgba(77, 91, 249, 0.3);
            "
          >
            <span style="font-size: 3rem; color: white">‚ùì</span>
          </div>
          <h2
            style="
              color: #1e293b;
              font-size: 3rem;
              font-weight: 800;
              margin: 0;
              letter-spacing: -1px;
            "
          >
            Trung t√¢m Tr·ª£ gi√∫p
          </h2>
          <p
            style="
              color: #64748b;
              font-size: 1.2rem;
              margin: 20px 0 0 0;
              font-weight: 500;
            "
          >
            Ch√∫ng t√¥i lu√¥n s·∫µn s√†ng h·ªó tr·ª£ b·∫°n
          </p>
        </div>

        <!-- Thanh t√¨m ki·∫øm FAQ -->
        <div
          style="display: flex; justify-content: center; margin: 50px 0 60px 0"
        >
          <div style="position: relative; width: 80%; max-width: 700px">
            <div
              style="
                position: relative;
                background: white;
                border-radius: 25px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
                border: 2px solid #e2e8f0;
                overflow: hidden;
              "
            >
              <input
                type="text"
                placeholder="üîç T√¨m ki·∫øm c√¢u h·ªèi th∆∞·ªùng g·∫∑p..."
                style="
                  width: 100%;
                  padding: 25px 35px;
                  border: none;
                  font-size: 1.2rem;
                  outline: none;
                  background: transparent;
                  transition: all 0.3s ease;
                "
                onfocus="this.parentElement.style.boxShadow='0 25px 80px rgba(77,91,249,0.15)';this.parentElement.style.border='2px solid #4d5bf9'"
                onblur="this.parentElement.style.boxShadow='0 20px 60px rgba(0,0,0,0.08)';this.parentElement.style.border='2px solid #e2e8f0'"
              />
              <div
                style="
                  position: absolute;
                  right: 35px;
                  top: 50%;
                  transform: translateY(-50%);
                  width: 45px;
                  height: 45px;
                  background: linear-gradient(135deg, #4d5bf9, #6a82fb);
                  border-radius: 50%;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  cursor: pointer;
                  transition: all 0.3s ease;
                "
                onmouseover="this.style.transform='translateY(-50%) scale(1.1)'"
                onmouseout="this.style.transform='translateY(-50%) scale(1)'"
              >
                <span style="color: white; font-size: 1.1rem">üîç</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Danh m·ª•c tr·ª£ gi√∫p -->
        <div
          style="
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            margin-bottom: 60px;
          "
        >
          <!-- M∆∞·ª£n s√°ch -->
          <div
            style="
              background: white;
              border-radius: 25px;
              padding: 35px;
              box-shadow: 0 15px 50px rgba(0, 0, 0, 0.08);
              border: 2px solid #f1f5f9;
              transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
              cursor: pointer;
              position: relative;
              overflow: hidden;
            "
            onmouseover="this.style.transform='translateY(-10px)';this.style.boxShadow='0 25px 70px rgba(77,91,249,0.15)';this.style.border='2px solid #4d5bf9'"
            onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 15px 50px rgba(0,0,0,0.08)';this.style.border='2px solid #f1f5f9'"
          >
            <div
              style="
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, #4d5bf9, #6a82fb);
              "
            ></div>
            <div style="text-align: center">
              <div
                style="
                  width: 70px;
                  height: 70px;
                  background: linear-gradient(135deg, #dbeafe, #93c5fd);
                  border-radius: 20px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin: 0 auto 20px;
                  box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
                "
              >
                <span style="font-size: 2rem">üìö</span>
              </div>
              <h4
                style="
                  font-size: 1.3rem;
                  font-weight: 700;
                  color: #1e293b;
                  margin: 0 0 15px 0;
                "
              >
                M∆∞·ª£n s√°ch
              </h4>
              <p
                style="
                  color: #64748b;
                  font-size: 0.95rem;
                  margin: 0;
                  line-height: 1.6;
                "
              >
                H∆∞·ªõng d·∫´n m∆∞·ª£n, tr·∫£ s√°ch v√† qu·∫£n l√Ω t√†i kho·∫£n
              </p>
              <div
                style="
                  margin-top: 20px;
                  padding: 8px 20px;
                  background: #dbeafe;
                  color: #1e40af;
                  border-radius: 20px;
                  font-size: 0.9rem;
                  font-weight: 600;
                  display: inline-block;
                "
              >
                5 b√†i vi·∫øt
              </div>
            </div>
          </div>

          <!-- S·ª≠ d·ª•ng th∆∞ vi·ªán -->
          <div
            style="
              background: white;
              border-radius: 25px;
              padding: 35px;
              box-shadow: 0 15px 50px rgba(0, 0, 0, 0.08);
              border: 2px solid #f1f5f9;
              transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
              cursor: pointer;
              position: relative;
              overflow: hidden;
            "
            onmouseover="this.style.transform='translateY(-10px)';this.style.boxShadow='0 25px 70px rgba(77,91,249,0.15)';this.style.border='2px solid #4d5bf9'"
            onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 15px 50px rgba(0,0,0,0.08)';this.style.border='2px solid #f1f5f9'"
          >
            <div
              style="
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, #4d5bf9, #6a82fb);
              "
            ></div>
            <div style="text-align: center">
              <div
                style="
                  width: 70px;
                  height: 70px;
                  background: linear-gradient(135deg, #dcfce7, #86efac);
                  border-radius: 20px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin: 0 auto 20px;
                  box-shadow: 0 10px 30px rgba(34, 197, 94, 0.3);
                "
              >
                <span style="font-size: 2rem">üèõÔ∏è</span>
              </div>
              <h4
                style="
                  font-size: 1.3rem;
                  font-weight: 700;
                  color: #1e293b;
                  margin: 0 0 15px 0;
                "
              >
                S·ª≠ d·ª•ng th∆∞ vi·ªán
              </h4>
              <p
                style="
                  color: #64748b;
                  font-size: 0.95rem;
                  margin: 0;
                  line-height: 1.6;
                "
              >
                Quy ƒë·ªãnh v√† h∆∞·ªõng d·∫´n s·ª≠ d·ª•ng th∆∞ vi·ªán
              </p>
              <div
                style="
                  margin-top: 20px;
                  padding: 8px 20px;
                  background: #dcfce7;
                  color: #166534;
                  border-radius: 20px;
                  font-size: 0.9rem;
                  font-weight: 600;
                  display: inline-block;
                "
              >
                8 b√†i vi·∫øt
              </div>
            </div>
          </div>

          <!-- T√†i kho·∫£n & B·∫£o m·∫≠t -->
          <div
            style="
              background: white;
              border-radius: 25px;
              padding: 35px;
              box-shadow: 0 15px 50px rgba(0, 0, 0, 0.08);
              border: 2px solid #f1f5f9;
              transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
              cursor: pointer;
              position: relative;
              overflow: hidden;
            "
            onmouseover="this.style.transform='translateY(-10px)';this.style.boxShadow='0 25px 70px rgba(77,91,249,0.15)';this.style.border='2px solid #4d5bf9'"
            onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 15px 50px rgba(0,0,0,0.08)';this.style.border='2px solid #f1f5f9'"
          >
            <div
              style="
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, #4d5bf9, #6a82fb);
              "
            ></div>
            <div style="text-align: center">
              <div
                style="
                  width: 70px;
                  height: 70px;
                  background: linear-gradient(135deg, #fef3c7, #fde68a);
                  border-radius: 20px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin: 0 auto 20px;
                  box-shadow: 0 10px 30px rgba(251, 191, 36, 0.3);
                "
              >
                <span style="font-size: 2rem">üîê</span>
              </div>
              <h4
                style="
                  font-size: 1.3rem;
                  font-weight: 700;
                  color: #1e293b;
                  margin: 0 0 15px 0;
                "
              >
                T√†i kho·∫£n & B·∫£o m·∫≠t
              </h4>
              <p
                style="
                  color: #64748b;
                  font-size: 0.95rem;
                  margin: 0;
                  line-height: 1.6;
                "
              >
                Qu·∫£n l√Ω t√†i kho·∫£n v√† b·∫£o m·∫≠t th√¥ng tin
              </p>
              <div
                style="
                  margin-top: 20px;
                  padding: 8px 20px;
                  background: #fef3c7;
                  color: #92400e;
                  border-radius: 20px;
                  font-size: 0.9rem;
                  font-weight: 600;
                  display: inline-block;
                "
              >
                6 b√†i vi·∫øt
              </div>
            </div>
          </div>
        </div>

        <!-- FAQ Section -->
        <div style="max-width: 900px; margin: 0 auto; padding: 0 20px">
          <div style="text-align: center; margin-bottom: 50px">
            <h3
              style="
                color: #1e293b;
                font-size: 2.2rem;
                font-weight: 700;
                margin: 0;
              "
            >
              ‚ùì C√¢u h·ªèi th∆∞·ªùng g·∫∑p
            </h3>
          </div>

          <!-- FAQ Items -->
          <div style="display: flex; flex-direction: column; gap: 20px">
            <!-- FAQ 1 -->
            <div
              style="
                background: white;
                border-radius: 20px;
                padding: 25px;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
                border: 2px solid #f1f5f9;
                cursor: pointer;
                transition: all 0.3s ease;
              "
              onclick="toggleFAQ(this)"
              onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 15px 50px rgba(77,91,249,0.15)'"
              onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 10px 40px rgba(0,0,0,0.08)'"
            >
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <h4
                  style="
                    font-size: 1.1rem;
                    font-weight: 600;
                    color: #1e293b;
                    margin: 0;
                  "
                >
                  L√†m th·∫ø n√†o ƒë·ªÉ m∆∞·ª£n s√°ch?
                </h4>
                <span
                  style="
                    font-size: 1.5rem;
                    color: #4d5bf9;
                    transition: transform 0.3s ease;
                  "
                  >+</span
                >
              </div>
              <div
                style="
                  max-height: 0;
                  overflow: hidden;
                  transition: max-height 0.3s ease;
                "
              >
                <p
                  style="
                    color: #64748b;
                    font-size: 0.95rem;
                    margin: 20px 0 0 0;
                    line-height: 1.6;
                  "
                >
                  ƒê·ªÉ m∆∞·ª£n s√°ch, b·∫°n c·∫ßn: 1) ƒêƒÉng nh·∫≠p v√†o t√†i kho·∫£n, 2) T√¨m ki·∫øm
                  s√°ch trong danh m·ª•c, 3) Nh·∫•n n√∫t "M∆∞·ª£n s√°ch", 4) X√°c nh·∫≠n
                  th√¥ng tin m∆∞·ª£n. S√°ch s·∫Ω ƒë∆∞·ª£c gi·ªØ trong 14 ng√†y.
                </p>
              </div>
            </div>

            <!-- FAQ 2 -->
            <div
              style="
                background: white;
                border-radius: 20px;
                padding: 25px;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
                border: 2px solid #f1f5f9;
                cursor: pointer;
                transition: all 0.3s ease;
              "
              onclick="toggleFAQ(this)"
              onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 15px 50px rgba(77,91,249,0.15)'"
              onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 10px 40px rgba(0,0,0,0.08)'"
            >
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <h4
                  style="
                    font-size: 1.1rem;
                    font-weight: 600;
                    color: #1e293b;
                    margin: 0;
                  "
                >
                  Th·ªùi gian m∆∞·ª£n s√°ch t·ªëi ƒëa l√† bao l√¢u?
                </h4>
                <span
                  style="
                    font-size: 1.5rem;
                    color: #4d5bf9;
                    transition: transform 0.3s ease;
                  "
                  >+</span
                >
              </div>
              <div
                style="
                  max-height: 0;
                  overflow: hidden;
                  transition: max-height 0.3s ease;
                "
              >
                <p
                  style="
                    color: #64748b;
                    font-size: 0.95rem;
                    margin: 20px 0 0 0;
                    line-height: 1.6;
                  "
                >
                  Th·ªùi gian m∆∞·ª£n s√°ch t·ªëi ƒëa l√† 14 ng√†y. B·∫°n c√≥ th·ªÉ gia h·∫°n th√™m
                  7 ng√†y n·∫øu kh√¥ng c√≥ ai ƒë·∫∑t tr∆∞·ªõc s√°ch ƒë√≥. Vui l√≤ng tr·∫£ s√°ch
                  ƒë√∫ng h·∫°n ƒë·ªÉ tr√°nh ph·∫°t.
                </p>
              </div>
            </div>

            <!-- FAQ 3 -->
            <div
              style="
                background: white;
                border-radius: 20px;
                padding: 25px;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
                border: 2px solid #f1f5f9;
                cursor: pointer;
                transition: all 0.3s ease;
              "
              onclick="toggleFAQ(this)"
              onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 15px 50px rgba(77,91,249,0.15)'"
              onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 10px 40px rgba(0,0,0,0.08)'"
            >
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <h4
                  style="
                    font-size: 1.1rem;
                    font-weight: 600;
                    color: #1e293b;
                    margin: 0;
                  "
                >
                  L√†m sao ƒë·ªÉ ƒë·∫∑t tr∆∞·ªõc s√°ch?
                </h4>
                <span
                  style="
                    font-size: 1.5rem;
                    color: #4d5bf9;
                    transition: transform 0.3s ease;
                  "
                  >+</span
                >
              </div>
              <div
                style="
                  max-height: 0;
                  overflow: hidden;
                  transition: max-height 0.3s ease;
                "
              >
                <p
                  style="
                    color: #64748b;
                    font-size: 0.95rem;
                    margin: 20px 0 0 0;
                    line-height: 1.6;
                  "
                >
                  Khi s√°ch ƒëang ƒë∆∞·ª£c m∆∞·ª£n, b·∫°n c√≥ th·ªÉ nh·∫•n n√∫t "ƒê·∫∑t tr∆∞·ªõc". Khi
                  s√°ch ƒë∆∞·ª£c tr·∫£ v·ªÅ, h·ªá th·ªëng s·∫Ω th√¥ng b√°o v√† b·∫°n c√≥ 3 ng√†y ƒë·ªÉ
                  ƒë·∫øn th∆∞ vi·ªán nh·∫≠n s√°ch.
                </p>
              </div>
            </div>

            <!-- FAQ 4 -->
            <div
              style="
                background: white;
                border-radius: 20px;
                padding: 25px;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
                border: 2px solid #f1f5f9;
                cursor: pointer;
                transition: all 0.3s ease;
              "
              onclick="toggleFAQ(this)"
              onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 15px 50px rgba(77,91,249,0.15)'"
              onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 10px 40px rgba(0,0,0,0.08)'"
            >
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <h4
                  style="
                    font-size: 1.1rem;
                    font-weight: 600;
                    color: #1e293b;
                    margin: 0;
                  "
                >
                  Qu√™n m·∫≠t kh·∫©u ph·∫£i l√†m sao?
                </h4>
                <span
                  style="
                    font-size: 1.5rem;
                    color: #4d5bf9;
                    transition: transform 0.3s ease;
                  "
                  >+</span
                >
              </div>
              <div
                style="
                  max-height: 0;
                  overflow: hidden;
                  transition: max-height 0.3s ease;
                "
              >
                <p
                  style="
                    color: #64748b;
                    font-size: 0.95rem;
                    margin: 20px 0 0 0;
                    line-height: 1.6;
                  "
                >
                  N·∫øu qu√™n m·∫≠t kh·∫©u, b·∫°n c√≥ th·ªÉ: 1) S·ª≠ d·ª•ng ch·ª©c nƒÉng "Qu√™n m·∫≠t
                  kh·∫©u" tr√™n trang ƒëƒÉng nh·∫≠p, 2) Nh·∫≠p email ƒëƒÉng k√Ω, 3) Ki·ªÉm tra
                  email ƒë·ªÉ l·∫•y link ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u m·ªõi.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Li√™n h·ªá h·ªó tr·ª£ -->
        <div
          style="
            text-align: center;
            margin-top: 80px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
          "
        >
          <div
            style="
              background: white;
              border-radius: 25px;
              padding: 40px;
              box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
              border: 2px solid #f1f5f9;
            "
          >
            <div
              style="
                width: 70px;
                height: 70px;
                background: linear-gradient(135deg, #4d5bf9, #6a82fb);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 0 auto 20px;
                box-shadow: 0 10px 30px rgba(77, 91, 249, 0.3);
              "
            >
              <span style="font-size: 1.8rem; color: white">üìû</span>
            </div>
            <h4
              style="
                font-size: 1.4rem;
                font-weight: 700;
                color: #1e293b;
                margin: 0 0 15px 0;
              "
            >
              C·∫ßn h·ªó tr·ª£ th√™m?
            </h4>
            <p
              style="
                color: #64748b;
                font-size: 1.1rem;
                margin: 0 0 25px 0;
                line-height: 1.6;
              "
            >
              N·∫øu b·∫°n kh√¥ng t√¨m th·∫•y c√¢u tr·∫£ l·ªùi trong ph·∫ßn FAQ, h√£y li√™n h·ªá v·ªõi
              ch√∫ng t√¥i
            </p>
            <div
              style="
                display: flex;
                gap: 20px;
                justify-content: center;
                flex-wrap: wrap;
              "
            >
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 10px;
                  padding: 15px 25px;
                  background: #f8fafc;
                  border-radius: 15px;
                  border: 2px solid #e2e8f0;
                "
              >
                <span style="font-size: 1.2rem">üìß</span>
                <span style="color: #1e293b; font-weight: 600"
                  >support@ptit.edu.vn</span
                >
              </div>
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 10px;
                  padding: 15px 25px;
                  background: #f8fafc;
                  border-radius: 15px;
                  border: 2px solid #e2e8f0;
                "
              >
                <span style="font-size: 1.2rem">üì±</span>
                <span style="color: #1e293b; font-weight: 600">1900-xxxx</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Ph·∫ßn giao di·ªán Favorite (Y√™u th√≠ch) -->
      <div id="favoriteSection" style="display: none">
        <!-- Thanh t√¨m ki·∫øm l·ªõn ph√≠a tr√™n -->
        <div style="width: 100%; margin-bottom: 40px">
          <div
            id="favoriteSearchContainer"
            style="
              position: relative;
              width: 100%;
              max-width: 800px;
              margin: 0 auto;
            "
          >
            <input
              id="favoriteSearchInput"
              type="text"
              placeholder="T√¨m ki·∫øm s√°ch y√™u th√≠ch c·ªßa b·∫°n..."
              autocomplete="off"
              style="
                width: 100%;
                font-size: 1.3rem;
                font-weight: 500;
                padding: 20px 30px;
                border: none;
                border-radius: 20px;
                background: rgba(255, 255, 255, 0.9);
                backdrop-filter: blur(10px);
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                outline: none;
                transition: all 0.3s ease;
              "
              onfocus="handleFavoriteSearchFocus()"
              onblur="handleFavoriteSearchBlur()"
              oninput="handleFavoriteSearchInput(event)"
              onkeydown="handleFavoriteSearchKeydown(event)"
            />
            <div
              style="
                position: absolute;
                right: 25px;
                top: 50%;
                transform: translateY(-50%);
                color: #666;
                font-size: 1.4rem;
              "
            >
              üîç
            </div>
            
            <!-- Dropdown Suggestions for Favorite -->
            <div
              id="favoriteSearchSuggestions"
              style="
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: white;
                border-radius: 0 0 20px 20px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
                border: 2px solid #4d5bf9;
                border-top: none;
                max-height: 400px;
                overflow-y: auto;
                z-index: 1000;
                display: none;
                margin-top: -2px;
              "
            >
              <!-- Suggestions will be populated by JavaScript -->
            </div>
          </div>
        </div>
        <div
          style="
            display: flex;
            gap: 40px;
            align-items: flex-start;
            flex-wrap: wrap;
          "
        >
          <!-- K·∫øt qu·∫£ t√¨m ki·∫øm -->
          <div style="flex: 2; min-width: 400px">
            <div
              style="
                font-size: 1.2rem;
                font-weight: 600;
                margin-bottom: 20px;
                color: #1a1a1a;
              "
            >
              K·∫øt qu·∫£ t√¨m ki·∫øm
            </div>
            <div
              style="
                background: rgba(255, 255, 255, 0.9);
                backdrop-filter: blur(10px);
                border-radius: 20px;
                padding: 24px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
                transition: all 0.3s ease;
              "
              onmouseover="this.style.transform='translateY(-4px)';this.style.boxShadow='0 12px 48px rgba(0,0,0,0.15)'"
              onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 8px 32px rgba(0,0,0,0.1)'"
            >
              <div style="display: flex; gap: 20px; align-items: flex-start">
                <img
                  src="hoavang.jpg"
                  alt="B√¨a s√°ch T√¥i th·∫•y hoa v√†ng tr√™n c·ªè xanh"
                  style="
                    width: 120px;
                    height: 160px;
                    object-fit: cover;
                    border-radius: 12px;
                    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
                  "
                />
                <div style="flex: 1; position: relative">
                  <div style="position: absolute; top: 0; right: 0">
                    <button
                      id="likeBtn"
                      style="
                        background: none;
                        border: none;
                        cursor: pointer;
                        font-size: 2rem;
                        color: #ef4444;
                        transition: all 0.3s ease;
                      "
                      onmouseover="this.style.transform='scale(1.1)'"
                      onmouseout="this.style.transform='scale(1)'"
                    >
                      <ion-icon name="heart"></ion-icon>
                    </button>
                  </div>
                  <div style="margin-top: 8px">
                    <h4
                      style="
                        font-size: 1.3rem;
                        font-weight: 600;
                        color: #1a1a1a;
                        margin-bottom: 8px;
                      "
                    >
                      T√¥i th·∫•y hoa v√†ng tr√™n c√≥ xanh
                    </h4>
                    <p style="color: #666; font-size: 1rem; margin-bottom: 6px">
                      <strong>T√°c gi·∫£:</strong> Nguy·ªÖn Nh·∫≠t √Ånh
                    </p>
                    <p style="color: #666; font-size: 1rem; margin-bottom: 6px">
                      <strong>NƒÉm xu·∫•t b·∫£n:</strong> 2010
                    </p>
                    <p style="color: #666; font-size: 1rem">
                      <strong>Th·ªÉ lo·∫°i:</strong> Ti·ªÉu thuy·∫øt, VƒÉn h·ªçc
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- S√°ch li√™n quan -->
          <div style="flex: 1; min-width: 300px">
            <div
              style="
                font-size: 1.2rem;
                font-weight: 600;
                margin-bottom: 20px;
                color: #1a1a1a;
              "
            >
              S√°ch li√™n quan
            </div>
            <div
              style="
                background: rgba(255, 255, 255, 0.9);
                backdrop-filter: blur(10px);
                border-radius: 20px;
                padding: 24px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
              "
            >
              <div style="display: flex; flex-direction: column; gap: 16px">
                <div
                  style="
                    background: rgba(255, 255, 255, 0.5);
                    border-radius: 12px;
                    padding: 16px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                  "
                  onmouseover="this.style.background='rgba(77,91,249,0.1)';this.style.transform='translateX(8px)'"
                  onmouseout="this.style.background='rgba(255,255,255,0.5)';this.style.transform='translateX(0)'"
                >
                  <div
                    style="font-weight: 600; color: #1a1a1a; margin-bottom: 4px"
                  >
                    Ng∆∞·ªùi gi√†u nh·∫•t th√†nh Babylon
                  </div>
                  <div style="font-size: 0.9rem; color: #666">
                    George S. Clason
                  </div>
                </div>
                <div
                  style="
                    background: rgba(255, 255, 255, 0.5);
                    border-radius: 12px;
                    padding: 16px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                  "
                  onmouseover="this.style.background='rgba(77,91,249,0.1)';this.style.transform='translateX(8px)'"
                  onmouseout="this.style.background='rgba(255,255,255,0.5)';this.style.transform='translateX(0)'"
                >
                  <div
                    style="font-weight: 600; color: #1a1a1a; margin-bottom: 4px"
                  >
                    Ng∆∞·ªùi ƒë√†n √¥ng mang t√™n Ove
                  </div>
                  <div style="font-size: 0.9rem; color: #666">
                    Fredrik Backman
                  </div>
                </div>
                <div
                  style="
                    background: rgba(255, 255, 255, 0.5);
                    border-radius: 12px;
                    padding: 16px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                  "
                  onmouseover="this.style.background='rgba(77,91,249,0.1)';this.style.transform='translateX(8px)'"
                  onmouseout="this.style.background='rgba(255,255,255,0.5)';this.style.transform='translateX(0)'"
                >
                  <div
                    style="font-weight: 600; color: #1a1a1a; margin-bottom: 4px"
                  >
                    Th·∫ßn tho·∫°i Sisyphus
                  </div>
                  <div style="font-size: 0.9rem; color: #666">Albert Camus</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Ph·∫ßn giao di·ªán Password (ƒê·ªïi m·∫≠t kh·∫©u) -->
      <div id="passwordSection" style="display: none">
        <div style="max-width: 450px; margin: 0 auto">
          <div
            style="
              background: rgba(255, 255, 255, 0.9);
              backdrop-filter: blur(10px);
              border-radius: 16px;
              padding: 30px;
              box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
              border: 1px solid rgba(255, 255, 255, 0.2);
            "
          >
            <div style="text-align: center; margin-bottom: 24px">
              <div
                style="
                  width: 60px;
                  height: 60px;
                  background: linear-gradient(135deg, #4d5bf9, #6a82fb);
                  border-radius: 50%;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin: 0 auto 12px;
                  box-shadow: 0 8px 24px rgba(77, 91, 249, 0.3);
                "
              >
                <ion-icon
                  name="lock-closed"
                  style="font-size: 1.5rem; color: white"
                ></ion-icon>
              </div>
              <h2
                style="
                  font-size: 1.5rem;
                  font-weight: 600;
                  color: #1a1a1a;
                  margin-bottom: 6px;
                "
              >
                ƒê·ªïi m·∫≠t kh·∫©u
              </h2>
              <p style="color: #666; font-size: 0.95rem">
                Vui l√≤ng nh·∫≠p th√¥ng tin ƒë·ªÉ c·∫≠p nh·∫≠t m·∫≠t kh·∫©u c·ªßa b·∫°n
              </p>
            </div>

            <form style="display: flex; flex-direction: column; gap: 18px">
              <div>
                <label
                  style="
                    display: block;
                    font-weight: 600;
                    color: #1a1a1a;
                    margin-bottom: 6px;
                    font-size: 0.95rem;
                  "
                  >M·∫≠t kh·∫©u hi·ªán t·∫°i</label
                >
                <div style="position: relative">
                  <input
                    type="password"
                    id="currentPassword"
                    placeholder="Nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i"
                    style="
                      width: 100%;
                      padding: 12px 16px;
                      border: none;
                      border-radius: 10px;
                      background: rgba(255, 255, 255, 0.8);
                      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
                      outline: none;
                      font-size: 0.95rem;
                      transition: all 0.3s ease;
                    "
                    onfocus="this.style.boxShadow='0 8px 24px rgba(77,91,249,0.15)'"
                    onblur="this.style.boxShadow='0 4px 16px rgba(0,0,0,0.05)'"
                  />
                  <div
                    style="
                      position: absolute;
                      right: 12px;
                      top: 50%;
                      transform: translateY(-50%);
                      color: #666;
                      cursor: pointer;
                    "
                    onclick="togglePassword('currentPassword')"
                  >
                    <ion-icon
                      name="eye-outline"
                      style="font-size: 1rem"
                    ></ion-icon>
                  </div>
                </div>
              </div>

              <div>
                <label
                  style="
                    display: block;
                    font-weight: 600;
                    color: #1a1a1a;
                    margin-bottom: 6px;
                    font-size: 0.95rem;
                  "
                  >M·∫≠t kh·∫©u m·ªõi</label
                >
                <div style="position: relative">
                  <input
                    type="password"
                    id="newPassword"
                    placeholder="Nh·∫≠p m·∫≠t kh·∫©u m·ªõi"
                    style="
                      width: 100%;
                      padding: 12px 16px;
                      border: none;
                      border-radius: 10px;
                      background: rgba(255, 255, 255, 0.8);
                      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
                      outline: none;
                      font-size: 0.95rem;
                      transition: all 0.3s ease;
                    "
                    onfocus="this.style.boxShadow='0 8px 24px rgba(77,91,249,0.15)'"
                    onblur="this.style.boxShadow='0 4px 16px rgba(0,0,0,0.05)'"
                  />
                  <div
                    style="
                      position: absolute;
                      right: 12px;
                      top: 50%;
                      transform: translateY(-50%);
                      color: #666;
                      cursor: pointer;
                    "
                    onclick="togglePassword('newPassword')"
                  >
                    <ion-icon
                      name="eye-outline"
                      style="font-size: 1rem"
                    ></ion-icon>
                  </div>
                </div>
                <div style="margin-top: 6px; font-size: 0.85rem; color: #666">
                  <div
                    style="
                      display: flex;
                      align-items: center;
                      gap: 6px;
                      margin-bottom: 3px;
                    "
                  >
                    <div
                      id="lengthCheck"
                      style="
                        width: 10px;
                        height: 10px;
                        border-radius: 50%;
                        background: #e5e7eb;
                      "
                    ></div>
                    <span>√çt nh·∫•t 8 k√Ω t·ª±</span>
                  </div>
                  <div
                    style="
                      display: flex;
                      align-items: center;
                      gap: 6px;
                      margin-bottom: 3px;
                    "
                  >
                    <div
                      id="uppercaseCheck"
                      style="
                        width: 10px;
                        height: 10px;
                        border-radius: 50%;
                        background: #e5e7eb;
                      "
                    ></div>
                    <span>C√≥ ch·ªØ hoa</span>
                  </div>
                  <div style="display: flex; align-items: center; gap: 6px">
                    <div
                      id="numberCheck"
                      style="
                        width: 10px;
                        height: 10px;
                        border-radius: 50%;
                        background: #e5e7eb;
                      "
                    ></div>
                    <span>C√≥ s·ªë</span>
                  </div>
                </div>
              </div>

              <div>
                <label
                  style="
                    display: block;
                    font-weight: 600;
                    color: #1a1a1a;
                    margin-bottom: 6px;
                    font-size: 0.95rem;
                  "
                  >X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi</label
                >
                <div style="position: relative">
                  <input
                    type="password"
                    id="confirmPassword"
                    placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi"
                    style="
                      width: 100%;
                      padding: 12px 16px;
                      border: none;
                      border-radius: 10px;
                      background: rgba(255, 255, 255, 0.8);
                      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
                      outline: none;
                      font-size: 0.95rem;
                      transition: all 0.3s ease;
                    "
                    onfocus="this.style.boxShadow='0 8px 24px rgba(77,91,249,0.15)'"
                    onblur="this.style.boxShadow='0 4px 16px rgba(0,0,0,0.05)'"
                  />
                  <div
                    style="
                      position: absolute;
                      right: 12px;
                      top: 50%;
                      transform: translateY(-50%);
                      color: #666;
                      cursor: pointer;
                    "
                    onclick="togglePassword('confirmPassword')"
                  >
                    <ion-icon
                      name="eye-outline"
                      style="font-size: 1rem"
                    ></ion-icon>
                  </div>
                </div>
              </div>

              <button
                type="button"
                onclick="updatePassword()"
                style="
                  background: linear-gradient(135deg, #4d5bf9, #6a82fb);
                  color: white;
                  border: none;
                  padding: 12px 24px;
                  border-radius: 10px;
                  font-size: 1rem;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s ease;
                  margin-top: 12px;
                "
                onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 8px 24px rgba(77,91,249,0.3)'"
                onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'"
              >
                C·∫≠p nh·∫≠t m·∫≠t kh·∫©u
              </button>
            </form>
          </div>
        </div>
      </div>

      <!-- Ph·∫ßn giao di·ªán Sign out (ƒêƒÉng xu·∫•t) -->
      <div id="signoutSection" style="display: none">
        <div style="max-width: 500px; margin: 0 auto">
          <div
            style="
              background: rgba(255, 255, 255, 0.9);
              backdrop-filter: blur(10px);
              border-radius: 20px;
              padding: 40px;
              box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
              border: 1px solid rgba(255, 255, 255, 0.2);
              text-align: center;
            "
          >
            <div
              style="
                width: 100px;
                height: 100px;
                background: linear-gradient(135deg, #4d5bf9, #6a82fb);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 0 auto 24px;
                box-shadow: 0 8px 24px rgba(77, 91, 249, 0.3);
              "
            >
              <ion-icon
                name="log-out"
                style="font-size: 2.5rem; color: white"
              ></ion-icon>
            </div>

            <h2
              style="
                font-size: 2rem;
                font-weight: 600;
                color: #1a1a1a;
                margin-bottom: 12px;
              "
            >
              ƒêƒÉng xu·∫•t
            </h2>
            <p
              style="
                color: #666;
                font-size: 1.1rem;
                margin-bottom: 32px;
                line-height: 1.6;
              "
            >
              B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ƒëƒÉng xu·∫•t kh·ªèi h·ªá th·ªëng th∆∞ vi·ªán PIIT?
            </p>

            <div
              style="
                display: flex;
                gap: 16px;
                justify-content: center;
                flex-wrap: wrap;
              "
            >
              <button
                onclick="cancelSignout()"
                style="
                  background: rgba(255, 255, 255, 0.8);
                  color: #666;
                  border: 2px solid #e5e7eb;
                  padding: 14px 32px;
                  border-radius: 12px;
                  font-size: 1rem;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s ease;
                "
                onmouseover="this.style.background='rgba(255,255,255,0.9)';this.style.transform='translateY(-2px)'"
                onmouseout="this.style.background='rgba(255,255,255,0.8)';this.style.transform='translateY(0)'"
              >
                H·ªßy b·ªè
              </button>
              <button
                onclick="confirmSignout()"
                style="
                  background: linear-gradient(135deg, #4d5bf9, #6a82fb);
                  color: white;
                  border: none;
                  padding: 14px 32px;
                  border-radius: 12px;
                  font-size: 1rem;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s ease;
                "
                onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 8px 24px rgba(77,91,249,0.3)'"
                onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'"
              >
                ƒêƒÉng xu·∫•t
              </button>
            </div>

            <div
              style="
                margin-top: 32px;
                padding: 20px;
                background: rgba(77, 91, 249, 0.1);
                border-radius: 12px;
                border-left: 4px solid #4d5bf9;
              "
            >
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 12px;
                  margin-bottom: 8px;
                "
              >
                <ion-icon
                  name="information-circle"
                  style="color: #4d5bf9; font-size: 1.2rem"
                ></ion-icon>
                <span style="font-weight: 600; color: #4d5bf9">L∆∞u √Ω</span>
              </div>
              <p
                style="
                  color: #666;
                  font-size: 0.95rem;
                  margin: 0;
                  line-height: 1.5;
                "
              >
                Sau khi ƒëƒÉng xu·∫•t, b·∫°n s·∫Ω c·∫ßn ƒëƒÉng nh·∫≠p l·∫°i ƒë·ªÉ truy c·∫≠p v√†o h·ªá
                th·ªëng. T·∫•t c·∫£ d·ªØ li·ªáu phi√™n l√†m vi·ªác s·∫Ω ƒë∆∞·ª£c x√≥a.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>
    <script src="script.js"></script>
    <!-- removed duplicate borrowed renderer to avoid overlapping; borrowsd.js handles it in Profile -->
    <!-- <script type="module" src="borrowed.js"></script> -->
    <script type="module" src="search-autocomplete.js"></script>
    <script>
      // X·ª≠ l√Ω chuy·ªÉn tab v√† hi·ªÉn th·ªã n·ªôi dung t∆∞∆°ng ·ª©ng
      let list = document.querySelectorAll(".list");
      for (let i = 0; i < list.length; i++) {
        list[i].onclick = function () {
          let j = 0;
          while (j < list.length) {
            list[j++].className = "list";
          }
          list[i].className = "list active";
          // Hi·ªÉn th·ªã n·ªôi dung t∆∞∆°ng ·ª©ng v·ªõi tab ƒë∆∞·ª£c ch·ªçn
          const homeSection = document.getElementById("homeSection");
          const profileSection = document.getElementById("profileSection");
          const helpSection = document.getElementById("helpSection");
          const favoriteSection = document.getElementById("favoriteSection");
          const passwordSection = document.getElementById("passwordSection");
          const signoutSection = document.getElementById("signoutSection");

          // ·∫®n t·∫•t c·∫£ sections tr∆∞·ªõc
          homeSection.style.display = "none";
          profileSection.style.display = "none";
          helpSection.style.display = "none";
          favoriteSection.style.display = "none";
          passwordSection.style.display = "none";
          signoutSection.style.display = "none";

          // Hi·ªÉn th·ªã section t∆∞∆°ng ·ª©ng
          if (list[i].querySelector(".title").textContent.trim() === "Home") {
            homeSection.style.display = "";
          } else if (
            list[i].querySelector(".title").textContent.trim() === "Proflie"
          ) {
            profileSection.style.display = "";
          } else if (
            list[i].querySelector(".title").textContent.trim() === "Help"
          ) {
            helpSection.style.display = "";
          } else if (
            list[i].querySelector(".title").textContent.trim() === "Favorite"
          ) {
            favoriteSection.style.display = "";
          } else if (
            list[i].querySelector(".title").textContent.trim() === "Password"
          ) {
            passwordSection.style.display = "";
          } else if (
            list[i].querySelector(".title").textContent.trim() === "Sign out"
          ) {
            signoutSection.style.display = "";
          }
        };
      }

      // M·∫∑c ƒë·ªãnh hi·ªán Home khi v√†o trang v√† k√≠ch ho·∫°t tab Home
      window.onload = function () {
        // K√≠ch ho·∫°t tab Home
        const homeTab = document.querySelector(".list");
        homeTab.className = "list active";

        // Hi·ªÉn th·ªã n·ªôi dung Home
        const homeSection = document.getElementById("homeSection");
        homeSection.style.display = "";

        // ·∫®n c√°c section kh√°c
        const profileSection = document.getElementById("profileSection");
        const helpSection = document.getElementById("helpSection");
        const favoriteSection = document.getElementById("favoriteSection");
        const passwordSection = document.getElementById("passwordSection");
        const signoutSection = document.getElementById("signoutSection");

        profileSection.style.display = "none";
        helpSection.style.display = "none";
        favoriteSection.style.display = "none";
        passwordSection.style.display = "none";
        signoutSection.style.display = "none";
      };

      // Toggle password visibility
      function togglePassword(inputId) {
        const input = document.getElementById(inputId);
        const icon = input.nextElementSibling.querySelector("ion-icon");

        if (input.type === "password") {
          input.type = "text";
          icon.name = "eye-off-outline";
        } else {
          input.type = "password";
          icon.name = "eye-outline";
        }
      }

      // Validate password strength
      document
        .getElementById("newPassword")
        .addEventListener("input", function () {
          const password = this.value;
          const lengthCheck = document.getElementById("lengthCheck");
          const uppercaseCheck = document.getElementById("uppercaseCheck");
          const numberCheck = document.getElementById("numberCheck");

          // Check length
          if (password.length >= 8) {
            lengthCheck.style.background = "#10b981";
          } else {
            lengthCheck.style.background = "#e5e7eb";
          }

          // Check uppercase
          if (/[A-Z]/.test(password)) {
            uppercaseCheck.style.background = "#10b981";
          } else {
            uppercaseCheck.style.background = "#e5e7eb";
          }

          // Check number
          if (/\d/.test(password)) {
            numberCheck.style.background = "#10b981";
          } else {
            numberCheck.style.background = "#e5e7eb";
          }
        });

      // Update password function
      function updatePassword() {
        const currentPassword =
          document.getElementById("currentPassword").value;
        const newPassword = document.getElementById("newPassword").value;
        const confirmPassword =
          document.getElementById("confirmPassword").value;

        // Basic validation
        if (!currentPassword || !newPassword || !confirmPassword) {
          alert("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!");
          return;
        }

        if (newPassword !== confirmPassword) {
          alert("M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp!");
          return;
        }

        if (newPassword.length < 8) {
          alert("M·∫≠t kh·∫©u m·ªõi ph·∫£i c√≥ √≠t nh·∫•t 8 k√Ω t·ª±!");
          return;
        }

        if (!/[A-Z]/.test(newPassword)) {
          alert("M·∫≠t kh·∫©u m·ªõi ph·∫£i c√≥ √≠t nh·∫•t 1 ch·ªØ hoa!");
          return;
        }

        if (!/\d/.test(newPassword)) {
          alert("M·∫≠t kh·∫©u m·ªõi ph·∫£i c√≥ √≠t nh·∫•t 1 s·ªë!");
          return;
        }

        // Simulate password update
        alert("M·∫≠t kh·∫©u ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√†nh c√¥ng!");

        // Clear form
        document.getElementById("currentPassword").value = "";
        document.getElementById("newPassword").value = "";
        document.getElementById("confirmPassword").value = "";

        // Reset password strength indicators
        document.getElementById("lengthCheck").style.background = "#e5e7eb";
        document.getElementById("uppercaseCheck").style.background = "#e5e7eb";
        document.getElementById("numberCheck").style.background = "#e5e7eb";
      }

      // Sign out confirmation
      function confirmSignout() {
        if (confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ƒëƒÉng xu·∫•t?")) {
          alert(
            "‚úÖ ƒêƒÉng xu·∫•t th√†nh c√¥ng!\n\nC·∫£m ∆°n b·∫°n ƒë√£ s·ª≠ d·ª•ng h·ªá th·ªëng qu·∫£n l√Ω th∆∞ vi·ªán PIIT."
          );

          // Chuy·ªÉn v·ªÅ trang ƒëƒÉng nh·∫≠p ·ªü th∆∞ m·ª•c Web
          window.location.href = "../../Web/index.html";
        }
      }

      function cancelSignout() {
        document.getElementById("signoutSection").style.display = "none";
      }

      // Toggle FAQ function
      function toggleFAQ(element) {
        const content = element.querySelector("div:last-child");
        const icon = element.querySelector("span:last-child");

        if (
          content.style.maxHeight === "0px" ||
          content.style.maxHeight === ""
        ) {
          content.style.maxHeight = content.scrollHeight + "px";
          icon.textContent = "‚àí";
          icon.style.transform = "rotate(180deg)";
        } else {
          content.style.maxHeight = "0px";
          icon.textContent = "+";
          icon.style.transform = "rotate(0deg)";
        }
      }
    </script>
    <!-- N√öT CHATBOT -->
    <button
      id="chatbot-toggler"
      style="
        position: fixed;
        right: 20px;
        bottom: 20px;
        z-index: 2147483647;
        background: transparent;
        border: none;
        cursor: pointer;
      "
    >
      <canvas id="chatbot-lottie-canvas" width="90" height="90"></canvas>
    </button>

    <!-- POPUP CHATBOT -->
    <iframe
      id="chatbotIframe"
      src="/chatbotAI/chatbot-popup.html"
      style="
        display: none;
        position: fixed;
        width: 380px;
        height: 600px;
        border-radius: 18px;
        border: none;
        background: transparent;
        box-shadow: none;
        z-index: 2147483646;
      "
    >
    </iframe>

    <!-- (Khuy·∫øn ngh·ªã) CSS g·ªçn cho desktop + mobile -->
    <style>
      :root {
        --chatbot-gap: 10px; /* kho·∫£ng h·ªü gi·ªØa khung & icon */
        --chatbot-edge: 12px; /* kho·∫£ng c√°ch icon t·ªõi m√©p m√†n h√¨nh */
        --chatbot-width: 380px;
        --chatbot-height: 600px;
      }
      #chatbot-toggler canvas {
        display: block;
        width: 90px;
        height: 90px;
      }
      #chatbotIframe {
        width: var(--chatbot-width);
        height: var(--chatbot-height);
        border-radius: 18px;
        overflow: hidden;
      }
      @media (max-width: 520px) {
        :root {
          --chatbot-gap: 10px;
          --chatbot-edge: 10px;
          --chatbot-width: 95vw;
          --chatbot-height: 80vh;
        }
      }
    </style>

    <!-- SCRIPT Lottie (icon ƒë·ªông) -->
    <script type="module">
      import { DotLottie } from "https://cdn.jsdelivr.net/npm/@lottiefiles/dotlottie-web/+esm";

      const canvas = document.getElementById("chatbot-lottie-canvas");
      const dotLottie = new DotLottie({
        autoplay: true,
        loop: true,
        canvas,
        src: "/chatbotAI/robot.json",
      });
    </script>

    <!-- SCRIPT toggle popup + cƒÉn theo icon -->
    <script>
      const toggle = document.getElementById("chatbot-toggler");
      const iframe = document.getElementById("chatbotIframe");

      toggle.addEventListener("click", () => {
        const show = iframe.style.display !== "block";
        iframe.style.display = show ? "block" : "none";
        if (show) placeChatNearIcon();
      });

      function placeChatNearIcon() {
        const root = getComputedStyle(document.documentElement);
        const gap = parseInt(root.getPropertyValue("--chatbot-gap")) || 10;
        const edge = parseInt(root.getPropertyValue("--chatbot-edge")) || 12;

        const r = toggle.getBoundingClientRect(); // L·∫•y k√≠ch th∆∞·ªõc v√† v·ªã tr√≠ c·ªßa n√∫t toggler

        // L·∫•y k√≠ch th∆∞·ªõc c·ªßa iframe (khung chat)
        // ƒê·∫£m b·∫£o iframe hi·ªÉn th·ªã ƒë·ªÉ l·∫•y ƒë√∫ng k√≠ch th∆∞·ªõc
        const originalDisplay = iframe.style.display;
        iframe.style.display = "block"; // T·∫°m th·ªùi hi·ªÉn th·ªã ƒë·ªÉ l·∫•y k√≠ch th∆∞·ªõc
        const iframeWidth = iframe.offsetWidth;
        const iframeHeight = iframe.offsetHeight;
        iframe.style.display = originalDisplay; // Kh√¥i ph·ª•c tr·∫°ng th√°i hi·ªÉn th·ªã ban ƒë·∫ßu

        // T√≠nh to√°n v·ªã tr√≠ m·ªõi cho iframe
        // ƒê·∫∑t khung chat ·ªü b√™n tr√°i c·ªßa icon v√† ph√≠a tr√™n icon
        // right: kho·∫£ng c√°ch t·ª´ m√©p ph·∫£i m√†n h√¨nh ƒë·∫øn m√©p ph·∫£i c·ªßa iframe
        // bottom: kho·∫£ng c√°ch t·ª´ m√©p d∆∞·ªõi m√†n h√¨nh ƒë·∫øn m√©p d∆∞·ªõi c·ªßa iframe
        iframe.style.right = `${window.innerWidth - r.right + r.width + gap}px`; // ƒê·∫∑t b√™n ph·∫£i icon
        iframe.style.bottom = `${
          window.innerHeight - r.bottom + r.height + gap
        }px`; // ƒê·∫∑t ph√≠a tr√™n icon

        // ƒêi·ªÅu ch·ªânh n·∫øu khung chat b·ªã tr√†n ra ngo√†i m√†n h√¨nh (t√πy ch·ªçn)
        // N·∫øu khung chat b·ªã tr√†n sang tr√°i
        if (iframe.offsetLeft < edge) {
          iframe.style.left = `${edge}px`;
          iframe.style.right = "auto"; // B·ªè thu·ªôc t√≠nh right ƒë·ªÉ left c√≥ hi·ªáu l·ª±c
        }
        // N·∫øu khung chat b·ªã tr√†n l√™n tr√™n
        if (iframe.offsetTop < edge) {
          iframe.style.top = `${edge}px`;
          iframe.style.bottom = "auto"; // B·ªè thu·ªôc t√≠nh bottom ƒë·ªÉ top c√≥ hi·ªáu l·ª±c
        }
      }

      window.addEventListener("resize", () => {
        if (iframe.style.display === "block") placeChatNearIcon();
      });

      // Click ra ngo√†i ƒë·ªÉ ƒë√≥ng
      document.addEventListener("click", (e) => {
        if (iframe.style.display !== "block") return;
        const insideBtn = e.target.closest("#chatbot-toggler");
        const insideFrame = e.target.closest("#chatbotIframe");
        if (!insideBtn && !insideFrame) iframe.style.display = "none";
      });
    </script>
  </body>
</html>
