<!-- BVD-EMB/chatbot-popup.html -->
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Librarybot Popup</title>

  <!-- Material Icons & CSS g·ªëc c·ªßa chatbot -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,0,0&family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0" />
  <link rel="stylesheet" href="style.css"/>
<style>
  /* N·ªÅn b√™n trong iframe trong su·ªët */
  html, body { height:100%; background: transparent !important; }
  body { margin:0; overflow:hidden; }

  /* N·∫øu popup c√≥ t·∫°o l·ªõp m·ªù b·∫±ng before/after -> t·∫Øt */
  .chatbot-popup::before,
  .chatbot-popup::after {
    content: none !important;
    display: none !important;
    background: transparent !important;
    backdrop-filter: none !important;
  }

  /* Khung chat chi·∫øm to√†n b·ªô iframe, n·ªÅn tr·∫Øng, bo g√≥c, b√≥ng nh·∫π */
  .chatbot-popup{
    position: absolute !important;
    inset: 0 !important;      /* top/right/bottom/left: 0 */
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    background: #fff !important;
    border-radius: 16px !important;
    box-shadow: 0 12px 40px rgba(0,0,0,.25) !important;
    opacity: 1 !important;
    transform: none !important;
    pointer-events: auto !important;
  }

  /* ·∫®n n√∫t tr√≤n b√™n trong popup (n·∫øu c√≥) */
  #chatbot-toggler{ display:none !important; }
</style>

</head>
<!-- √©p m·ªü s·∫µn popup b·∫±ng class show-chatbot -->
<body class="show-chatbot">
  <!-- (·∫©n) n√∫t toggler ƒë·ªÉ tr√°nh l·ªói script -->
  <button id="chatbot-toggler" aria-hidden="true" style="display:none">
    <canvas id="chatbot-lottie-canvas" width="98" height="98"></canvas>
    <span class="material-symbols-rounded">close</span>
  </button>

  <!-- === POPUP CHATBOT (gi·ªØ nguy√™n c·∫•u tr√∫c c≈© ƒë·ªÉ script.js ho·∫°t ƒë·ªông) === -->
  <div class="chatbot-popup">
    <!-- Header -->
    <div class="chat-header">
      <div class="header-info">
        <svg class="chatbot-logo" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="10 10 600 600">
          <path d="M528 320C528 205.1 434.9 112 320 112C205.1 112 112 205.1 112 320C112 394.1 150.8 459.2 209.1 496C208.4 490.8 208 485.4 208 480L208 426.5C197.8 413.9 189.7 399.6 184.2 384.1C180.1 372.5 192 362.7 203.8 366.3C238.5 376.9 278 382.8 319.9 382.8C361.9 382.8 401.4 376.8 436.2 366.2C448 362.6 459.9 372.3 455.8 384C450.3 399.6 442.2 413.9 432 426.5L432 480C432 485.4 431.6 490.8 430.9 496C489.3 459.2 528 394.1 528 320zM576 320C576 436.3 498.4 534.6 392.1 565.7C372.6 582.1 347.5 592 320 592C292.5 592 267.4 582.1 247.9 565.7C141.6 534.6 64 436.3 64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320zM240 240C257.7 240 272 254.3 272 272C272 289.7 257.7 304 240 304C222.3 304 208 289.7 208 272C208 254.3 222.3 240 240 240zM368 272C368 254.3 382.3 240 400 240C417.7 240 432 254.3 432 272C432 289.7 417.7 304 400 304C382.3 304 368 289.7 368 272zM384 480L384 442.6C384 427.9 372.1 416 357.4 416L355.4 416C344.1 416 334.3 423.9 331.8 434.9C329 447.5 311 447.5 308.2 434.9C305.7 423.8 295.9 416 284.6 416L282.6 416C267.9 416 256 427.9 256 442.6L256 480C256 515.3 284.7 544 320 544C355.3 544 384 515.3 384 480z"/></path>
        </svg>
        <h2 class="logo-text">Librarybot</h2>
      </div>
      <button id="close-chatbot" class="material-symbols-rounded">keyboard_arrow_down</button>
    </div>

    <!-- Body -->
   <div class="chat-body">
  <div class="message bot-message">
  <svg class="bot-avatar" ...></svg>

  <div class="bot-block">
    <!-- L·ªùi ch√†o -->
    <div class="message-text">
      Xin ch√†o üëã<br/>B·∫°n c·∫ßn t√¨m s√°ch n√†o?
    </div>

    <!-- Quick Prompts -->
    <div class="quick-prompts" aria-label="G·ª£i √Ω nhanh">
  <button type="button" class="quick-prompt" data-prompt="C√≥ nh·ªØng th·ªÉ lo·∫°i n√†o?">C√°c th·ªÉ lo·∫°i</button>
  <button type="button" class="quick-prompt" data-prompt="Nh·ªØng t√°c gi·∫£ ti√™u bi·ªÉu?">T√°c gi·∫£ n·ªïi b·∫≠t</button>
  <button type="button" class="quick-prompt" data-prompt="Th·ªùi gian l√†m vi·ªác">Th·ªùi gian l√†m vi·ªác</button>
  <button type="button" class="quick-prompt" data-prompt="Quy ƒë·ªãnh m∆∞·ª£n s√°ch">Quy ƒë·ªãnh</button>
</div>

  </div>
</div>
</div>

    <!-- Footer -->
    <div class="chat-footer">
      <form action="#" class="chat-form">
        <textarea placeholder="Message..." class="message-input" required></textarea>
        <div class="chat-controls">
          <button type="button" id="emoji-picker" class="material-symbols-rounded">sentiment_satisfied</button>
          <div class="file-upload-wrapper">
            <input type="file" accept="images/*" id="file-input" hidden>
            <button type="button" id="file-upload" class="material-symbols-rounded" title="upload file c·ªßa b·∫°n">attach_file</button>
          </div>
          <button type="button" id="voice-input" class="material-symbols-rounded" title="G√µ b·∫±ng gi·ªçng n√≥i">mic</button>
          <button type="submit" id="send-message" class="material-symbols-rounded">arrow_upward</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Emoji picker + Lottie + voice + logic -->
  <script src="https://cdn.jsdelivr.net/npm/emoji-mart@latest/dist/browser.js"></script>
  <script type="module">
    import { DotLottie } from "https://cdn.jsdelivr.net/npm/@lottiefiles/dotlottie-web/+esm";
    // t·∫°o canvas ·∫©n ƒë·ªÉ tr√°nh l·ªói script c≈© (kh√¥ng c·∫ßn hi·ªÉn th·ªã trong iframe)
    const canvas = document.getElementById("chatbot-lottie-canvas");
    if (canvas) {
      const dotLottie = new DotLottie({ autoplay:true, loop:true, canvas, src:"robot.json" });
      dotLottie.addEventListener('ready', () => { canvas.style.background='transparent'; });
    }
  </script>
  <script src="https://code.responsivevoice.org/responsivevoice.js"></script>
  <script type="module" src="./script.js"></script>
</body>
</html>
